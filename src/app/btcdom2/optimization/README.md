# BTCDOM2 å‚æ•°ä¼˜åŒ–ç³»ç»Ÿ

## æ¦‚è¿°

BTCDOM2å‚æ•°ä¼˜åŒ–ç³»ç»Ÿæ˜¯ä¸€ä¸ªç§‘å­¦åŒ–çš„é‡åŒ–ç­–ç•¥å‚æ•°è°ƒä¼˜å·¥å…·ï¼Œé€šè¿‡ç³»ç»Ÿæ€§çš„æœç´¢å’Œæœºå™¨å­¦ä¹ ç®—æ³•ï¼Œå¸®åŠ©ç”¨æˆ·æ‰¾åˆ°å†å²æ•°æ®ä¸Šè¡¨ç°æœ€ä¼˜çš„ç­–ç•¥å‚æ•°ç»„åˆã€‚

âš ï¸ **é‡è¦æé†’**: å‚æ•°ä¼˜åŒ–å­˜åœ¨è¿‡æ‹Ÿåˆé£é™©ï¼Œæœ¬ç³»ç»Ÿæä¾›å¤šç§éªŒè¯æœºåˆ¶å¸®åŠ©æ‚¨æ‰¾åˆ°çœŸæ­£å¯ä¿¡çš„å‚æ•°é…ç½®ã€‚è¯·åŠ¡å¿…éµå¾ªæœ€ä½³å®è·µæŒ‡å—ã€‚

## æ ¸å¿ƒç‰¹æ€§

### ğŸ¯ å¤šç›®æ ‡ä¼˜åŒ–
- **æœ€å¤§åŒ–æ€»æ”¶ç›Šç‡**: è¿½æ±‚ç»å¯¹æ”¶ç›Šæœ€å¤§åŒ–
- **æœ€å¤§åŒ–å¤æ™®æ¯”ç‡**: å¹³è¡¡æ”¶ç›Šå’Œé£é™©
- **æœ€å°åŒ–æœ€å¤§å›æ’¤**: æ§åˆ¶æœ€å¤§æŸå¤±å¹…åº¦
- **æœ€å¤§åŒ–é£é™©è°ƒæ•´æ”¶ç›Š**: ç»¼åˆè€ƒè™‘æ”¶ç›Šå’Œå›æ’¤

### ğŸ” å¤šç§ä¼˜åŒ–æ–¹æ³•
- **ç½‘æ ¼æœç´¢**: å…¨é¢éå†å‚æ•°ç©ºé—´ï¼Œç¡®ä¿ä¸é—æ¼æœ€ä¼˜è§£ï¼Œé€‚åˆå°å‚æ•°ç©ºé—´
- **è´å¶æ–¯ä¼˜åŒ–**: æ™ºèƒ½æœç´¢ï¼Œå¿«é€Ÿæ”¶æ•›åˆ°æœ€ä¼˜åŒºåŸŸï¼Œé€‚åˆæ¢ç´¢æ€§ä¼˜åŒ–
- **æ··åˆæ–¹æ³•**ï¼ˆæ¨èï¼‰: å…ˆç²—æœç´¢åç²¾ç»†ä¼˜åŒ–ï¼Œå¹³è¡¡é€Ÿåº¦å’Œæ•ˆæœ

### ğŸ›¡ï¸ è¿‡æ‹Ÿåˆé˜²æŠ¤
- **å‚æ•°ç¨³å¥æ€§æµ‹è¯•**: è¯„ä¼°å‚æ•°åœ¨å¾®è°ƒåçš„ç¨³å®šæ€§
- **å¤šæ—¶é—´æ®µéªŒè¯**: æ£€éªŒå‚æ•°åœ¨ä¸åŒå¸‚åœºç¯å¢ƒä¸‹çš„è¡¨ç°
- **æ€§èƒ½è¡°å‡ç›‘æ§**: è·Ÿè¸ªæœ€ä¼˜å‚æ•°çš„æ—¶é—´è¡°å‡æƒ…å†µ
- **äº¤å‰éªŒè¯æœºåˆ¶**: æ™ºèƒ½é€‰æ‹©å¤šä¸ªéªŒè¯æ—¶é—´æ®µï¼Œç»¼åˆè¯„ä¼°å‚æ•°æ³›åŒ–èƒ½åŠ›
- **ç¨³å®šæ€§è¯„åˆ†**: é‡åŒ–è¯„ä¼°å‚æ•°åœ¨ä¸åŒæ—¶é—´æ®µçš„è¡¨ç°ä¸€è‡´æ€§

### ğŸ“Š æ™ºèƒ½åˆ†æ
- **å‚æ•°é‡è¦æ€§åˆ†æ**: è¯†åˆ«å¯¹ç­–ç•¥è¡¨ç°å½±å“æœ€å¤§çš„å‚æ•°
- **ç¨³å®šæ€§è¯„ä¼°**: è¯„ä¼°ç­–ç•¥åœ¨ä¸åŒå‚æ•°ä¸‹çš„ç¨³å®šæ€§
- **æ•æ„Ÿæ€§åˆ†æ**: æµ‹è¯•å‚æ•°å¾®è°ƒå¯¹ç»“æœçš„å½±å“ç¨‹åº¦
- **é£é™©è¯„ä¼°**: å¤šç»´åº¦é£é™©æŒ‡æ ‡åˆ†æ
- **ç›¸å…³æ€§åˆ†æ**: å‘ç°å‚æ•°é—´çš„ç›¸äº’å½±å“å…³ç³»
- **å¯è§†åŒ–å±•ç¤º**: ç›´è§‚çš„ç»“æœå±•ç¤ºå’Œå¯¹æ¯”

## ç³»ç»Ÿæ¶æ„

```
optimization/
â”œâ”€â”€ types.ts              # ç±»å‹å®šä¹‰å’Œæ¥å£
â”œâ”€â”€ optimizer.ts          # æ ¸å¿ƒä¼˜åŒ–å¼•æ“
â”œâ”€â”€ analysis-utils.ts     # ç»“æœåˆ†æå·¥å…·
â”œâ”€â”€ OptimizationPanel.tsx # ä¸»ç•Œé¢ç»„ä»¶
â”œâ”€â”€ OptimizationGuide.tsx # ä½¿ç”¨æŒ‡å—ç»„ä»¶
â”œâ”€â”€ validation-utils.ts   # éªŒè¯å’Œé˜²è¿‡æ‹Ÿåˆå·¥å…·
â””â”€â”€ README.md            # è¯´æ˜æ–‡æ¡£
```

### æ ¸å¿ƒç»„ä»¶

#### 1. ParameterOptimizer ç±»
- è´Ÿè´£æ‰§è¡Œå‚æ•°ä¼˜åŒ–ä»»åŠ¡
- æ”¯æŒç½‘æ ¼æœç´¢ã€è´å¶æ–¯ä¼˜åŒ–ã€æ··åˆä¼˜åŒ–
- æä¾›è¿›åº¦å›è°ƒå’Œä»»åŠ¡ç®¡ç†
- å†…ç½®è¿‡æ‹Ÿåˆæ£€æµ‹æœºåˆ¶

#### 2. ValidationUtils ç±»
- å‚æ•°ç¨³å¥æ€§éªŒè¯
- æ ·æœ¬å¤–æ€§èƒ½æµ‹è¯•
- æ—¶é—´çª—å£æ»šåŠ¨éªŒè¯
- æ•æ„Ÿæ€§åˆ†æå·¥å…·

#### 3. OptimizationAnalyzer ç±»
- ç»“æœåˆ†æå’Œç»Ÿè®¡
- å‚æ•°é‡è¦æ€§è¯„ä¼°
- æ€§èƒ½åˆ†å¸ƒåˆ†æ
- è¿‡æ‹Ÿåˆé£é™©è¯„ä¼°

#### 3. OptimizationPanel ç»„ä»¶
- ç”¨æˆ·äº¤äº’ç•Œé¢
- å‚æ•°é…ç½®å’Œç»“æœå±•ç¤º
- é›†æˆä½¿ç”¨æŒ‡å—

## å‚æ•°ç©ºé—´

### æƒé‡å‚æ•°ï¼ˆæ€»å’Œå¿…é¡»ä¸º1ï¼‰
- **è·Œå¹…æƒé‡** (priceChangeWeight): 0-1, å»ºè®® 0.1-0.7
- **æˆäº¤é‡æƒé‡** (volumeWeight): 0-1, å»ºè®® 0.1-0.5  
- **æ³¢åŠ¨ç‡æƒé‡** (volatilityWeight): 0-1, å»ºè®® 0-0.3
- **èµ„é‡‘è´¹ç‡æƒé‡** (fundingRateWeight): 0-1, å»ºè®® 0.1-0.6

### ç­–ç•¥å‚æ•°
- **æœ€å¤šåšç©ºæ•°é‡** (maxShortPositions): 1-50, å»ºè®® 5-20
- **ä»“ä½åˆ†é…ç­–ç•¥** (allocationStrategy): 3ç§é€‰æ‹©
  - BY_VOLUME: æŒ‰æˆäº¤é‡æ¯”ä¾‹åˆ†é…
  - BY_COMPOSITE_SCORE: æŒ‰ç»¼åˆåˆ†æ•°åˆ†é…æƒé‡
  - EQUAL_ALLOCATION: å¹³å‡åˆ†é…åšç©ºèµ„é‡‘

### ğŸ›ï¸ ä¼˜åŒ–é…ç½®å‚æ•°
- **ä¼˜åŒ–ç›®æ ‡** (objective): 
  - maxDrawdown: æœ€å°åŒ–æœ€å¤§å›æ’¤ï¼ˆæ¨èç¨³å¥å‹ï¼‰
  - sharpe: æœ€å¤§åŒ–å¤æ™®æ¯”ç‡ï¼ˆæ¨èå¹³è¡¡å‹ï¼‰
  - totalReturn: æœ€å¤§åŒ–æ€»æ”¶ç›Šç‡ï¼ˆæ¨èæ¿€è¿›å‹ï¼‰
  - composite: ç»¼åˆé£é™©è°ƒæ•´æ”¶ç›Š
- **ä¼˜åŒ–æ–¹æ³•** (method): grid | bayesian | hybridï¼ˆæ¨èï¼‰
- **ä»“ä½ç­–ç•¥æ¨¡å¼** (allocationStrategyMode): 
  - fixed: å›ºå®šå•ä¸€ç­–ç•¥
  - random: éšæœºæµ‹è¯•æ‰€æœ‰ç­–ç•¥

## ğŸ”„ äº¤å‰éªŒè¯åŠŸèƒ½

### æ ¸å¿ƒæ€æƒ³

äº¤å‰éªŒè¯åŠŸèƒ½æ—¨åœ¨è§£å†³å‚æ•°ä¼˜åŒ–ä¸­çš„è¿‡åº¦æ‹Ÿåˆé—®é¢˜ã€‚é€šè¿‡åœ¨å¤šä¸ªä¸åŒæ—¶é—´æ®µéªŒè¯å‚æ•°çš„è¡¨ç°ï¼Œç¡®ä¿ä¼˜åŒ–ç»“æœå…·æœ‰æ›´å¥½çš„æ³›åŒ–èƒ½åŠ›å’Œç¨³å®šæ€§ã€‚

#### ä¼ ç»Ÿä¼˜åŒ–é—®é¢˜
- åªåœ¨å•ä¸€æ—¶é—´æ®µï¼ˆè®­ç»ƒæœŸï¼‰ä¼˜åŒ–å‚æ•°
- å®¹æ˜“äº§ç”Ÿè¿‡åº¦æ‹Ÿåˆï¼Œåœ¨è®­ç»ƒæœŸè¡¨ç°å¾ˆå¥½ä½†åœ¨å…¶ä»–æ—¶é—´æ®µè¡¨ç°å·®
- ç¼ºä¹å¯¹ç­–ç•¥ç¨³å®šæ€§çš„è¯„ä¼°

#### äº¤å‰éªŒè¯è§£å†³æ–¹æ¡ˆ
1. **è®­ç»ƒæ—¶é—´æ®µ**ï¼šç”¨æˆ·æŒ‡å®šçš„åŸå§‹ä¼˜åŒ–æ—¶é—´æ®µ
2. **éªŒè¯æ—¶é—´æ®µ**ï¼šç³»ç»Ÿæ™ºèƒ½é€‰æ‹©çš„2-3ä¸ªé¢å¤–æ—¶é—´æ®µ
3. **ç»¼åˆè¯„åˆ†**ï¼šç»“åˆè®­ç»ƒæœŸå’ŒéªŒè¯æœŸçš„è¡¨ç°ï¼Œè®¡ç®—æœ€ç»ˆå¾—åˆ†
4. **ç¨³å®šæ€§è¯„ä¼°**ï¼šè¯„ä¼°å‚æ•°åœ¨ä¸åŒæ—¶é—´æ®µçš„è¡¨ç°ä¸€è‡´æ€§

### ğŸ¯ äº¤å‰éªŒè¯ç‰¹æ€§

#### 1. çµæ´»çš„æ—¶é—´æ®µé…ç½®
- **éªŒè¯æ—¶é—´æ®µæ•°é‡**ï¼šå¯é…ç½®1-5ä¸ªéªŒè¯æ—¶é—´æ®µ
- **æ—¶é—´æ®µé•¿åº¦**ï¼š
  - å›ºå®šé•¿åº¦ï¼šæŒ‡å®šå›ºå®šçš„å¤©æ•°
  - éšæœºé•¿åº¦ï¼šåœ¨æŒ‡å®šèŒƒå›´å†…éšæœºé€‰æ‹©é•¿åº¦
- **é€‰æ‹©èŒƒå›´**ï¼šæŒ‡å®šä»å“ªä¸ªæ—¶é—´èŒƒå›´å†…é€‰æ‹©éªŒè¯æ—¶é—´æ®µ
- **é‡å æ§åˆ¶**ï¼šå¯é€‰æ‹©æ˜¯å¦å…è®¸éªŒè¯æ—¶é—´æ®µä¸è®­ç»ƒæ—¶é—´æ®µé‡å 

#### 2. æ™ºèƒ½è¯„åˆ†æœºåˆ¶
- **æƒé‡é…ç½®**ï¼šè®­ç»ƒæœŸæƒé‡ + éªŒè¯æœŸæƒé‡ = 1
- **ç»¼åˆè¯„åˆ†** = è®­ç»ƒæœŸå¾—åˆ† Ã— è®­ç»ƒæƒé‡ + éªŒè¯æœŸå¹³å‡å¾—åˆ† Ã— éªŒè¯æƒé‡
- **ä¸€è‡´æ€§æŒ‡æ ‡**ï¼š
  - æ ‡å‡†å·®ï¼šè¡¡é‡å„æ—¶é—´æ®µè¡¨ç°çš„ç¦»æ•£ç¨‹åº¦
  - æ€§èƒ½èŒƒå›´ï¼šæœ€å¥½ä¸æœ€å·®è¡¨ç°çš„å·®å€¼
  - ç¨³å®šæ€§è¯„åˆ†ï¼š0-1åˆ†å€¼ï¼Œè¶Šé«˜è¶Šç¨³å®š

#### 3. ç»“æœè§£è¯»æŒ‡å¯¼
- **ç»¼åˆè¯„åˆ†æ¦‚è§ˆ**ï¼šæ˜¾ç¤ºæœ€ç»ˆç»¼åˆå¾—åˆ†å’Œç¨³å®šæ€§è¯„åˆ†
- **å„æ—¶é—´æ®µè¯¦æƒ…**ï¼šå±•ç¤ºæ¯ä¸ªæ—¶é—´æ®µçš„è¯¦ç»†è¡¨ç°
- **æ€§èƒ½å¯¹æ¯”è¡¨**ï¼šæ‰€æœ‰æ—¶é—´æ®µçš„æŒ‡æ ‡å¯¹æ¯”
- **æ™ºèƒ½å»ºè®®**ï¼šåŸºäºç¨³å®šæ€§è¯„åˆ†çš„å‚æ•°é€‰æ‹©å»ºè®®

### ğŸ›ï¸ äº¤å‰éªŒè¯é…ç½®

#### åŸºç¡€é…ç½®
```typescript
import { ParameterOptimizer } from './optimizer';

const crossValidationConfig = ParameterOptimizer.createDefaultCrossValidationConfig(
  '2023-01-01', // è®­ç»ƒå¼€å§‹æ—¥æœŸ
  '2023-03-31', // è®­ç»ƒç»“æŸæ—¥æœŸ
  '2022-01-01', // éªŒè¯é€‰æ‹©èŒƒå›´å¼€å§‹
  '2024-12-31'  // éªŒè¯é€‰æ‹©èŒƒå›´ç»“æŸ
);
```

#### è‡ªå®šä¹‰é…ç½®
```typescript
const customConfig: CrossValidationConfig = {
  enabled: true,
  validationPeriods: 3, // 3ä¸ªéªŒè¯æ—¶é—´æ®µ
  periodLength: {
    type: 'random',
    randomRange: {
      minDays: 20,
      maxDays: 60
    }
  },
  selectionRange: {
    startDate: '2022-01-01',
    endDate: '2024-12-31',
    allowOverlap: false // ä¸å…è®¸é‡å 
  },
  scoreWeights: {
    training: 0.7,    // è®­ç»ƒæœŸæƒé‡70%
    validation: 0.3   // éªŒè¯æœŸæƒé‡30%
  }
};
```

#### é…ç½®å»ºè®®
- **éªŒè¯æ—¶é—´æ®µæ•°é‡**ï¼šæ¨è2-3ä¸ªï¼Œå¹³è¡¡éªŒè¯æ•ˆæœå’Œè®¡ç®—æˆæœ¬
- **æ—¶é—´æ®µé•¿åº¦**ï¼š
  - çŸ­æœŸç­–ç•¥ï¼š15-30å¤©
  - ä¸­æœŸç­–ç•¥ï¼š30-60å¤©
  - é•¿æœŸç­–ç•¥ï¼š60-90å¤©
- **æƒé‡é…ç½®**ï¼š
  - ä¿å®ˆé…ç½®ï¼šè®­ç»ƒ0.8ï¼ŒéªŒè¯0.2ï¼ˆé‡è§†è®­ç»ƒæœŸè¡¨ç°ï¼‰
  - å¹³è¡¡é…ç½®ï¼šè®­ç»ƒ0.6ï¼ŒéªŒè¯0.4ï¼ˆå¹³è¡¡è®­ç»ƒå’ŒéªŒè¯ï¼‰
  - æ¿€è¿›é…ç½®ï¼šè®­ç»ƒ0.5ï¼ŒéªŒè¯0.5ï¼ˆæ›´é‡è§†æ³›åŒ–èƒ½åŠ›ï¼‰

### ğŸ“Š ç¨³å®šæ€§è¯„åˆ†è§£è¯»

- **> 0.8**ï¼šå¾ˆç¨³å®šï¼Œå…·æœ‰è‰¯å¥½æ³›åŒ–èƒ½åŠ›ï¼Œæ¨èä½¿ç”¨
- **0.6-0.8**ï¼šè¾ƒç¨³å®šï¼Œå¯æ¥å—çš„å‚æ•°ç»„åˆ
- **0.4-0.6**ï¼šä¸å¤ªç¨³å®šï¼Œéœ€è¦è°¨æ…è¯„ä¼°
- **< 0.4**ï¼šä¸ç¨³å®šï¼Œå¯èƒ½å­˜åœ¨è¿‡åº¦æ‹Ÿåˆï¼Œä¸æ¨èä½¿ç”¨

## ä½¿ç”¨æ–¹æ³•

### åŸºç¡€ä½¿ç”¨

1. **é€‰æ‹©ä¼˜åŒ–ç›®æ ‡**
   ```typescript
   // æ¨èæ ¹æ®é£é™©åå¥½é€‰æ‹©
   objective: 'maxDrawdown'  // ç¨³å¥å‹ï¼šæœ€å°åŒ–å›æ’¤
   objective: 'sharpe'       // å¹³è¡¡å‹ï¼šé£é™©è°ƒæ•´æ”¶ç›Š
   objective: 'totalReturn'  // æ¿€è¿›å‹ï¼šæœ€å¤§åŒ–æ”¶ç›Š
   ```

2. **é…ç½®å‚æ•°èŒƒå›´ï¼ˆé‡è¦ï¼šèŒƒå›´è®¾ç½®å½±å“è¿‡æ‹Ÿåˆé£é™©ï¼‰**
   ```typescript
   parameterRange: {
     weights: {
       priceChangeWeight: { min: 0.2, max: 0.6, step: 0.1 }, // å»ºè®®èŒƒå›´ä¸è¦å¤ªå®½
       volumeWeight: { min: 0.05, max: 0.3, step: 0.05 },
       volatilityWeight: { min: 0.05, max: 0.2, step: 0.05 },
       fundingRateWeight: { min: 0.3, max: 0.7, step: 0.1 }
     },
     maxShortPositions: { min: 5, max: 15, step: 2 }, // æ­¥é•¿é€‚ä¸­ï¼Œé¿å…è¿‡åº¦æœç´¢
   }
   ```

3. **é€‰æ‹©ä¼˜åŒ–æ–¹æ³•**
   ```typescript
   const config = {
     method: 'hybrid',  // æ¨èï¼šå¹³è¡¡æ•ˆç‡å’Œæ•ˆæœ
     maxIterations: 200, // ä¸å®œè¿‡å¤šï¼Œé¿å…è¿‡æ‹Ÿåˆ
     allocationStrategyMode: 'fixed', // å»ºè®®å…ˆå›ºå®šç­–ç•¥
   };
   ```

4. **å¯åŠ¨ä¼˜åŒ–**
   ```typescript
   const optimizer = new ParameterOptimizer();
   const results = await optimizer.startOptimization(config, parameterRange);
   ```

### ğŸ”„ ä½¿ç”¨äº¤å‰éªŒè¯ï¼ˆæ¨èï¼‰

#### 1. é…ç½®äº¤å‰éªŒè¯
```typescript
const crossValidationConfig = {
  enabled: true,
  validationPeriods: 2, // 2ä¸ªéªŒè¯æ—¶é—´æ®µ
  periodLength: {
    type: 'fixed',
    fixedDays: 90  // ä¸è®­ç»ƒæœŸé•¿åº¦ç›¸è¿‘
  },
  selectionRange: {
    startDate: '2022-01-01',
    endDate: '2024-12-31',
    allowOverlap: false
  },
  scoreWeights: {
    training: 0.6,    // è®­ç»ƒæœŸæƒé‡60%
    validation: 0.4   // éªŒè¯æœŸæƒé‡40%
  }
};
```

#### 2. å¯åŠ¨äº¤å‰éªŒè¯ä¼˜åŒ–
```typescript
const config: OptimizationConfig = {
  baseParams: { /* åŸºç¡€å‚æ•° */ },
  objective: 'sharpe',
  method: 'hybrid',
  crossValidation: crossValidationConfig, // å¯ç”¨äº¤å‰éªŒè¯
  maxIterations: 150,
  allocationStrategyMode: 'fixed'
};

const results = await optimizer.startOptimization(config, parameterRange);
```

#### 3. åˆ†æäº¤å‰éªŒè¯ç»“æœ
```typescript
const bestResult = results[0];
if (bestResult.crossValidation) {
  const cv = bestResult.crossValidation;
  
  console.log('ç»¼åˆè¯„åˆ†:', cv.compositeScore);
  console.log('ç¨³å®šæ€§è¯„åˆ†:', cv.consistency.stabilityScore);
  console.log('è®­ç»ƒæœŸè¡¨ç°:', cv.trainingResult.objectiveValue);
  console.log('éªŒè¯æœŸè¡¨ç°:', cv.validationResults.map(vr => vr.objectiveValue));
  
  // åˆ¤æ–­ç­–ç•¥ç¨³å®šæ€§
  if (cv.consistency.stabilityScore > 0.7) {
    console.log('ç­–ç•¥è¡¨ç°ç¨³å®šï¼Œå…·æœ‰è‰¯å¥½çš„æ³›åŒ–èƒ½åŠ›');
  } else {
    console.log('ç­–ç•¥è¡¨ç°ä¸å¤Ÿç¨³å®šï¼Œå¯èƒ½å­˜åœ¨è¿‡åº¦æ‹Ÿåˆé£é™©');
  }
}

// ç­›é€‰ç¨³å®šæ€§é«˜çš„ç»“æœ
const stableResults = results.filter(r => 
  r.crossValidation?.consistency.stabilityScore > 0.6
);
```

#### 4. åŸºäºç¨³å®šæ€§é€‰æ‹©å‚æ•°
```typescript
// ä¼˜å…ˆé€‰æ‹©ç¨³å®šæ€§è¯„åˆ†é«˜çš„å‚æ•°ç»„åˆ
const selectedParams = stableResults.length > 0 
  ? stableResults[0].combination  // æœ€ç¨³å®šçš„å‚æ•°
  : results[0].combination;       // å¦‚æœéƒ½ä¸ç¨³å®šï¼Œé€‰æ‹©æœ€ä¼˜çš„

console.log('æ¨èå‚æ•°ç»„åˆ:', selectedParams);
```

### ğŸ”„ é˜²è¿‡æ‹Ÿåˆçš„éªŒè¯æµç¨‹

#### æ ·æœ¬å¤–éªŒè¯ï¼ˆå¼ºçƒˆæ¨èï¼‰
```typescript
// ç¬¬ä¸€æ­¥ï¼šåœ¨è®­ç»ƒæœŸä¼˜åŒ–å‚æ•°
const trainingConfig = {
  ...baseConfig,
  baseParams: {
    ...baseParams,
    startDate: '2020-01-01',
    endDate: '2023-12-31'  // è®­ç»ƒæœŸ
  }
};

// ç¬¬äºŒæ­¥ï¼šåœ¨éªŒè¯æœŸæµ‹è¯•å‚æ•°
const validationConfig = {
  ...baseConfig,
  baseParams: {
    ...baseParams,
    startDate: '2024-01-01',
    endDate: '2025-06-21'  // éªŒè¯æœŸ
  }
};
```

#### å‚æ•°ç¨³å¥æ€§æµ‹è¯•
```typescript
// æµ‹è¯•å‚æ•°å¾®è°ƒåçš„è¡¨ç°
const robustnessTest = {
  bestParams: optimizationResults[0].combination,
  perturbationRange: 0.1, // 10%çš„å‚æ•°æ‰°åŠ¨
  testCount: 10          // æµ‹è¯•10ç§å¾®è°ƒç»„åˆ
};
```

### é«˜çº§åŠŸèƒ½

#### ç»“æœåˆ†æä¸éªŒè¯
```typescript
// åŸºç¡€åˆ†æ
const topResults = results.slice(0, 5); // åªå…³æ³¨å‰5ä¸ªç»“æœ

// ç¨³å®šæ€§æ£€æŸ¥ï¼šå‰å‡ åç»“æœçš„å‚æ•°æ˜¯å¦ç›¸ä¼¼ï¼Ÿ
const parameterConsistency = checkParameterConsistency(topResults);

// æ€§èƒ½åˆ†å¸ƒï¼šæ£€æŸ¥æ˜¯å¦å­˜åœ¨å¼‚å¸¸å¥½çš„ç»“æœ
const performanceDistribution = analyzePerformanceDistribution(results);
```

#### å¤šæ—¶é—´æ®µéªŒè¯
```typescript
// å°†æ•°æ®åˆ†ä¸ºå¤šä¸ªæ—¶é—´æ®µæµ‹è¯•
const timeWindows = [
  { start: '2020-01-01', end: '2021-12-31' },
  { start: '2022-01-01', end: '2023-12-31' },
  { start: '2024-01-01', end: '2025-06-21' }
];

// æµ‹è¯•æœ€ä¼˜å‚æ•°åœ¨å„æ—¶é—´æ®µçš„è¡¨ç°
const crossPeriodValidation = await validateAcrossPeriods(bestParams, timeWindows);
```

#### å¯¼å‡ºå’Œè¿½è¸ª
```typescript
// å¯¼å‡ºä¼˜åŒ–ç»“æœï¼ˆåªä¿ç•™å‰10ä¸ªï¼‰
const jsonData = optimizer.exportResults(task);

// è®°å½•ä¼˜åŒ–å†å²ï¼Œé¿å…é‡å¤ä¼˜åŒ–åŒæ ·å‚æ•°
const optimizationHistory = {
  timestamp: Date.now(),
  config: config,
  bestResult: results[0],
  validationScore: crossPeriodValidation.averagePerformance
};
```

## API æ–‡æ¡£

### OptimizationConfig
```typescript
interface OptimizationConfig {
  baseParams: BTCDOM2StrategyParams;  // åŸºç¡€ç­–ç•¥å‚æ•°
  objective: 'maxDrawdown' | 'sharpe' | 'totalReturn' | 'composite';
  method: 'grid' | 'bayesian' | 'hybrid';
  maxIterations: number;              // æœ€å¤§è¿­ä»£æ¬¡æ•°
  timeLimit?: number;                 // æ—¶é—´é™åˆ¶ï¼ˆç§’ï¼‰
  allocationStrategyMode: 'fixed' | 'random'; // ä»“ä½ç­–ç•¥æ¨¡å¼
  fixedAllocationStrategy?: PositionAllocationStrategy; // å›ºå®šç­–ç•¥
  crossValidation?: CrossValidationConfig; // äº¤å‰éªŒè¯é…ç½®
}
```

### CrossValidationConfig
```typescript
interface CrossValidationConfig {
  enabled: boolean;                   // æ˜¯å¦å¯ç”¨äº¤å‰éªŒè¯
  validationPeriods: number;          // éªŒè¯æ—¶é—´æ®µæ•°é‡ï¼ˆ1-5ï¼‰
  periodLength: {                     // éªŒè¯æ—¶é—´æ®µé•¿åº¦é…ç½®
    type: 'fixed' | 'random';
    fixedDays?: number;              // å›ºå®šå¤©æ•°
    randomRange?: {                  // éšæœºèŒƒå›´
      minDays: number;
      maxDays: number;
    };
  };
  selectionRange: {                   // éªŒè¯æ—¶é—´æ®µé€‰æ‹©èŒƒå›´
    startDate: string;               // å¯é€‰æ‹©çš„å¼€å§‹æ—¥æœŸ
    endDate: string;                 // å¯é€‰æ‹©çš„ç»“æŸæ—¥æœŸ
    allowOverlap: boolean;           // æ˜¯å¦å…è®¸ä¸è®­ç»ƒæœŸé‡å 
  };
  scoreWeights: {                     // è¯„åˆ†æƒé‡
    training: number;                // è®­ç»ƒæœŸæƒé‡
    validation: number;              // éªŒè¯æœŸæƒé‡
  };
}
```

### OptimizationResult
```typescript
interface OptimizationResult {
  combination: ParameterCombination;   // å‚æ•°ç»„åˆ
  metrics: {                          // æ€§èƒ½æŒ‡æ ‡ï¼ˆç²¾ç®€ç‰ˆï¼‰
    totalReturn: number;
    sharpeRatio: number;
    maxDrawdown: number;
    calmarRatio: number;
    winRate: number;
  };
  objectiveValue: number;             // ç›®æ ‡å‡½æ•°å€¼
  executionTime: number;              // æ‰§è¡Œæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
  crossValidation?: CrossValidationResult; // äº¤å‰éªŒè¯ç»“æœ
}
```

### CrossValidationResult
```typescript
interface CrossValidationResult {
  compositeScore: number;             // ç»¼åˆè¯„åˆ†
  trainingResult: {                   // è®­ç»ƒæœŸç»“æœ
    period: { startDate: string; endDate: string };
    objectiveValue: number;
    metrics: PerformanceMetrics;
  };
  validationResults: Array<{          // éªŒè¯æœŸç»“æœ
    period: { startDate: string; endDate: string };
    objectiveValue: number;
    metrics: PerformanceMetrics;
  }>;
  consistency: {                      // ä¸€è‡´æ€§æŒ‡æ ‡
    standardDeviation: number;        // æ ‡å‡†å·®
    performanceRange: number;         // æ€§èƒ½èŒƒå›´
    stabilityScore: number;           // ç¨³å®šæ€§è¯„åˆ†ï¼ˆ0-1ï¼‰
    coefficientOfVariation: number;   // å˜å¼‚ç³»æ•°
  };
}
```

### ParameterRange
```typescript
interface ParameterRange {
  weights: {
    priceChangeWeight: { min: number; max: number; step: number };
    volumeWeight: { min: number; max: number; step: number };
    volatilityWeight: { min: number; max: number; step: number };
    fundingRateWeight: { min: number; max: number; step: number };
  };
  maxShortPositions: { min: number; max: number; step: number };
  allocationStrategy?: PositionAllocationStrategy[]; // å¯é€‰ç­–ç•¥åˆ—è¡¨
}
```

## ğŸ¯ å¯»æ‰¾å¯ä¿¡å‚æ•°çš„æœ€ä½³å®è·µ

### âœ… å¼ºçƒˆæ¨èçš„åšæ³•

1. **ï¿½ ä¼˜å…ˆä½¿ç”¨äº¤å‰éªŒè¯**ï¼ˆæœ€é‡è¦ï¼‰
   - å¯ç”¨äº¤å‰éªŒè¯åŠŸèƒ½ï¼Œè‡ªåŠ¨åœ¨å¤šä¸ªæ—¶é—´æ®µéªŒè¯å‚æ•°ç¨³å®šæ€§
   - é€‰æ‹©ç¨³å®šæ€§è¯„åˆ† > 0.7 çš„å‚æ•°ç»„åˆ
   - å…³æ³¨ç»¼åˆè¯„åˆ†ï¼Œè€Œéå•ä¸€æ—¶é—´æ®µçš„æå€¼è¡¨ç°
   - è®¾ç½®åˆç†çš„æƒé‡æ¯”ä¾‹ï¼ˆå»ºè®®è®­ç»ƒæœŸ0.6ï¼ŒéªŒè¯æœŸ0.4ï¼‰

2. **ï¿½ğŸ“Š æ—¶é—´åˆ†å‰²éªŒè¯**ï¼ˆä¼ ç»Ÿæ–¹æ³•ï¼‰
   - ç”¨70%å†å²æ•°æ®ä¼˜åŒ–ï¼Œ20%æ•°æ®éªŒè¯ï¼Œ10%æ•°æ®æœ€ç»ˆæµ‹è¯•
   - ç¡®ä¿éªŒè¯æœŸå’Œæµ‹è¯•æœŸçš„è¡¨ç°ä¸æ˜æ˜¾ä½äºè®­ç»ƒæœŸ
   - å¦‚æœéªŒè¯æœŸè¡¨ç°å¤§å¹…ä¸‹é™ï¼Œè¯´æ˜è¿‡æ‹Ÿåˆä¸¥é‡

3. **ğŸ›ï¸ ä¿å®ˆçš„å‚æ•°èŒƒå›´**
   - æƒé‡èŒƒå›´ä¸è¦è®¾ç½®è¿‡å®½ï¼ˆå¦‚0.1-0.9ï¼‰ï¼Œå»ºè®®æ§åˆ¶åœ¨åˆç†åŒºé—´
   - ä¼˜å…ˆä½¿ç”¨è¾ƒå¤§çš„æ­¥é•¿ï¼Œé¿å…è¿‡åº¦ç²¾ç»†æœç´¢
   - åŒæ—¶ä¼˜åŒ–çš„å‚æ•°ä¸å®œè¶…è¿‡4ä¸ª

4. **ğŸ“ˆ å…³æ³¨ç¨³å®šæ€§è€Œéæå€¼**
   - ä¼˜å…ˆé€‰æ‹©ç¨³å®šæ€§è¯„åˆ†é«˜çš„å‚æ•°ç»„åˆï¼Œè€Œéæ”¶ç›Šç‡æœ€é«˜çš„
   - é¿å…é€‰æ‹©å‚æ•°ç»„åˆä¸å…¶ä»–ç»“æœå·®å¼‚å·¨å¤§çš„"å¼‚å¸¸å€¼"
   - é‡è§†å¤æ™®æ¯”ç‡å’Œæœ€å¤§å›æ’¤ï¼Œè€Œéå•çº¯è¿½æ±‚æ”¶ç›Šç‡

5. **ğŸ”„ å¤šæ¬¡éªŒè¯**
   - åœ¨ä¸åŒæ—¶é—´æ®µé‡å¤éªŒè¯æœ€ä¼˜å‚æ•°
   - æµ‹è¯•å‚æ•°çš„å¾®è°ƒç‰ˆæœ¬ï¼ˆÂ±10%ï¼‰æ˜¯å¦ä¾ç„¶æœ‰æ•ˆ
   - è§‚å¯Ÿå‚æ•°åœ¨ä¸åŒå¸‚åœºç¯å¢ƒä¸‹çš„é€‚åº”æ€§

6. **ğŸ“ å»ºç«‹ä¼˜åŒ–æ—¥å¿—**
   - è®°å½•æ¯æ¬¡ä¼˜åŒ–çš„é…ç½®å’Œç»“æœ
   - è·Ÿè¸ªäº¤å‰éªŒè¯çš„ç¨³å®šæ€§è¯„åˆ†å˜åŒ–
   - é¿å…åœ¨çŸ­æœŸå†…å¯¹åŒä¸€æ•°æ®é›†åå¤ä¼˜åŒ–
   - å®šæœŸè¯„ä¼°å†å²æœ€ä¼˜å‚æ•°çš„å½“å‰è¡¨ç°

### âŒ å¿…é¡»é¿å…çš„è¯¯åŒº

1. **ğŸš« æ•°æ®çª¥æ¢åå·®**
   - ä¸è¦æ ¹æ®ä¼˜åŒ–ç»“æœåå¤è°ƒæ•´å‚æ•°èŒƒå›´
   - ä¸è¦åœ¨çœ‹åˆ°"ä¸æ»¡æ„"çš„ç»“æœåç«‹å³é‡æ–°ä¼˜åŒ–
   - ä¸è¦åŸºäºå•ä¸€æ—¶é—´æ®µçš„å¼‚å¸¸è¡¨ç°åšå†³ç­–

2. **ğŸš« è¿‡åº¦æ‹Ÿåˆé™·é˜±**
   - é¿å…åœ¨åŒä¸€æ•°æ®é›†ä¸Šè¿›è¡Œ10æ¬¡ä»¥ä¸Šçš„ä¼˜åŒ–
   - ä¸è¦è¿½æ±‚è®­ç»ƒæœŸ99%ä»¥ä¸Šçš„å®Œç¾è¡¨ç°
   - ä¸è¦åŒæ—¶ä¼˜åŒ–è¶…è¿‡5ä¸ªå‚æ•°

3. **ğŸš« é€‰æ‹©æ€§åå·®**
   - ä¸è¦åªå…³æ³¨æ”¶ç›Šç‡æœ€é«˜çš„ç»“æœ
   - ä¸è¦å¿½è§†æœ€å¤§å›æ’¤å’Œé£é™©æŒ‡æ ‡
   - ä¸è¦åŸºäºå•ä¸€æŒ‡æ ‡åšå‡ºé€‰æ‹©

4. **ğŸš« é™æ€æ€ç»´**
   - ä¸è¦æœŸæœ›ä¸€å¥—å‚æ•°æ°¸è¿œæœ‰æ•ˆ
   - ä¸è¦å¿½è§†å¸‚åœºç¯å¢ƒçš„å˜åŒ–
   - ä¸è¦é•¿æœŸä½¿ç”¨æœªéªŒè¯çš„å‚æ•°

### ğŸ† æ¨èçš„éªŒè¯æµç¨‹

#### ç¬¬ä¸€é˜¶æ®µï¼šä¿å®ˆä¼˜åŒ–ï¼ˆå»ºè®®é…ç½®ï¼‰
```typescript
const conservativeConfig = {
  objective: 'maxDrawdown',     // å…ˆå…³æ³¨é£é™©æ§åˆ¶
  method: 'hybrid',            // å¹³è¡¡æ•ˆç‡å’Œæ•ˆæœ
  maxIterations: 100,          // é€‚ä¸­çš„è¿­ä»£æ¬¡æ•°
  allocationStrategyMode: 'fixed', // å›ºå®šç­–ç•¥å‡å°‘å˜é‡
};

const conservativeRange = {
  weights: {
    priceChangeWeight: { min: 0.2, max: 0.5, step: 0.1 },
    volumeWeight: { min: 0.1, max: 0.3, step: 0.1 },
    volatilityWeight: { min: 0.05, max: 0.15, step: 0.05 },
    fundingRateWeight: { min: 0.3, max: 0.6, step: 0.1 }
  },
  maxShortPositions: { min: 5, max: 15, step: 5 }
};
```

#### ç¬¬äºŒé˜¶æ®µï¼šæ ·æœ¬å¤–éªŒè¯
```typescript
// ç”¨æœ€ä¼˜å‚æ•°åœ¨ä¸åŒæ—¶é—´æ®µæµ‹è¯•
const validationPeriods = [
  { start: '2023-01-01', end: '2023-12-31' },
  { start: '2024-01-01', end: '2024-12-31' },
  { start: '2025-01-01', end: '2025-06-21' }
];
```

#### ç¬¬ä¸‰é˜¶æ®µï¼šç¨³å¥æ€§ç¡®è®¤
```typescript
// æµ‹è¯•å‚æ•°å¾®è°ƒç‰ˆæœ¬
const robustnesTests = generateParameterVariations(bestParams, 0.1); // Â±10%
```

## æ€§èƒ½å’Œé™åˆ¶

### âš¡ æ€§èƒ½è€ƒè™‘
- **ç½‘æ ¼æœç´¢**: æ—¶é—´å¤æ‚åº¦ O(n^k)ï¼Œé€‚åˆå°å‚æ•°ç©ºé—´ï¼ˆå»ºè®®æ€»ç»„åˆæ•°<1000ï¼‰
- **è´å¶æ–¯ä¼˜åŒ–**: é€‚åˆä¸­ç­‰å‚æ•°ç©ºé—´ï¼Œæ”¶æ•›é€Ÿåº¦å¿«ä½†å¯èƒ½é™·å…¥å±€éƒ¨æœ€ä¼˜
- **æ··åˆæ–¹æ³•**: æ¨èä½¿ç”¨ï¼Œå…ˆç²—åç»†ï¼Œå¹³è¡¡æ•ˆç‡å’Œè¦†ç›–é¢
- **å†…å­˜ä½¿ç”¨**: ç³»ç»Ÿåªä¿ç•™å‰10ä¸ªæœ€ä¼˜ç»“æœï¼Œè‡ªåŠ¨æ¸…ç†ä»¥èŠ‚çœå†…å­˜

### ğŸ”’ ç³»ç»Ÿé™åˆ¶
- **å‚æ•°çº¦æŸ**: å››ä¸ªæƒé‡å‚æ•°æ€»å’Œå¿…é¡»ä¸º1ï¼ˆè¯¯å·®å®¹å¿0.001ï¼‰
- **æœç´¢èŒƒå›´**: è¿‡å¤§çš„å‚æ•°ç©ºé—´ä¼šæ˜¾è‘—å¢åŠ è®¡ç®—æ—¶é—´å’Œè¿‡æ‹Ÿåˆé£é™©
- **æ•°æ®ä¾èµ–**: ç»“æœè´¨é‡é«˜åº¦ä¾èµ–å†å²æ•°æ®çš„ä»£è¡¨æ€§å’Œå……åˆ†æ€§
- **å¹¶å‘é™åˆ¶**: æœ€å¤š3ä¸ªå¹¶å‘è¯·æ±‚ï¼Œé¿å…æœåŠ¡å™¨è¿‡è½½
- **ç¯å¢ƒé™åˆ¶**: ä¼˜åŒ–åŠŸèƒ½ä»…åœ¨å¼€å‘ç¯å¢ƒä¸‹å¯ç”¨

### âš ï¸ è¿‡æ‹Ÿåˆé£é™©è¯„ä¼°
- **é«˜é£é™©ä¿¡å·**: è®­ç»ƒæœŸè¡¨ç°å¼‚å¸¸ä¼˜ç§€ï¼ˆå¦‚å¹´åŒ–æ”¶ç›Š>200%ï¼‰ï¼ŒéªŒè¯æœŸå¤§å¹…ä¸‹é™
- **ä¸­é£é™©ä¿¡å·**: æœ€ä¼˜å‚æ•°ä¸å…¶ä»–ç»“æœå·®å¼‚å·¨å¤§ï¼Œå‚æ•°åˆ†å¸ƒä¸è¿ç»­
- **ä½é£é™©ä¿¡å·**: å‰å‡ åç»“æœå‚æ•°ç›¸ä¼¼ï¼Œå¤šæ—¶é—´æ®µè¡¨ç°ç¨³å®š

## æ‰©å±•å’Œç»´æŠ¤

### æ·»åŠ æ–°çš„ä¼˜åŒ–ç›®æ ‡
```typescript
// åœ¨ types.ts ä¸­æ·»åŠ æ–°ç›®æ ‡
export enum OptimizationObjective {
  // ç°æœ‰ç›®æ ‡...
  MAXIMIZE_WIN_RATE = 'MAXIMIZE_WIN_RATE',
}

// åœ¨ optimizer.ts ä¸­å®ç°è®¡ç®—é€»è¾‘
private calculateObjectiveValue(result: BTCDOM2BacktestResult, objective: OptimizationObjective): number {
  switch (objective) {
    case OptimizationObjective.MAXIMIZE_WIN_RATE:
      return result.performance.winRate || 0;
    // ...
  }
}
```

### æ·»åŠ æ–°çš„ä¼˜åŒ–ç®—æ³•
```typescript
// ç»§æ‰¿æˆ–æ‰©å±• ParameterOptimizer ç±»
class AdvancedOptimizer extends ParameterOptimizer {
  async executeGeneticAlgorithm(task: OptimizationTask) {
    // å®ç°é—ä¼ ç®—æ³•
  }
}
```

### è‡ªå®šä¹‰åˆ†ææŒ‡æ ‡
```typescript
// æ‰©å±• OptimizationAnalyzer ç±»
export class CustomAnalyzer extends OptimizationAnalyzer {
  static analyzeCustomMetric(results: OptimizationResult[]) {
    // å®ç°è‡ªå®šä¹‰åˆ†æ
  }
}
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **â“ ä¼˜åŒ–ç»“æœå·®å¼‚å¾ˆå¤§ï¼Œå“ªä¸ªå¯ä¿¡ï¼Ÿ**
   - **ä¼˜å…ˆä½¿ç”¨äº¤å‰éªŒè¯**ï¼šé€‰æ‹©ç¨³å®šæ€§è¯„åˆ† > 0.7 çš„å‚æ•°ç»„åˆ
   - å…³æ³¨ç»¼åˆè¯„åˆ†ï¼Œè€Œéå•ä¸€è®­ç»ƒæœŸçš„æå€¼è¡¨ç°
   - å¦‚æœéƒ½ä¸ç¨³å®šï¼Œé€‰æ‹©å‰5åä¸­å‚æ•°ç›¸å¯¹ç¨³å®šçš„ç»„åˆ
   - è¿›è¡Œæ ·æœ¬å¤–éªŒè¯ï¼Œé€‰æ‹©éªŒè¯æœŸè¡¨ç°ä¸é”™çš„å‚æ•°

2. **â“ å¦‚ä½•åˆ¤æ–­æ˜¯å¦è¿‡æ‹Ÿåˆï¼Ÿ**
   - **äº¤å‰éªŒè¯æŒ‡æ ‡**ï¼šç¨³å®šæ€§è¯„åˆ† < 0.4ï¼ŒéªŒè¯æœŸè¡¨ç°ä¸è®­ç»ƒæœŸå·®å¼‚å·¨å¤§
   - è®­ç»ƒæœŸè¡¨ç°å¼‚å¸¸ä¼˜ç§€ï¼Œä½†éªŒè¯æœŸå¤§å¹…ä¸‹é™
   - æœ€ä¼˜å‚æ•°ä¸å¸¸è¯†å·®å¼‚å·¨å¤§ï¼ˆå¦‚æŸæƒé‡ä¸º0æˆ–1ï¼‰
   - å‚æ•°å¾®è°ƒåè¡¨ç°å¤§å¹…æ¶åŒ–

3. **â“ äº¤å‰éªŒè¯ç»“æœæ˜¾ç¤ºä¸ç¨³å®šæ€ä¹ˆåŠï¼Ÿ**
   - è°ƒæ•´å‚æ•°æœç´¢èŒƒå›´ï¼Œé¿å…è¿‡äºæ¿€è¿›çš„å‚æ•°è®¾ç½®
   - å¢åŠ éªŒè¯æœŸæƒé‡ï¼ˆå¦‚è°ƒæ•´ä¸ºè®­ç»ƒ0.5ï¼ŒéªŒè¯0.5ï¼‰
   - å¢åŠ éªŒè¯æ—¶é—´æ®µæ•°é‡ï¼Œè·å¾—æ›´å…¨é¢çš„è¯„ä¼°
   - é€‰æ‹©ç¨³å®šæ€§è¯„åˆ†ç›¸å¯¹è¾ƒé«˜çš„å‚æ•°ç»„åˆ
   - è€ƒè™‘ä½¿ç”¨æ›´ä¿å®ˆçš„ä¼˜åŒ–ç›®æ ‡ï¼ˆå¦‚æœ€å°åŒ–å›æ’¤ï¼‰

4. **â“ äº¤å‰éªŒè¯ä¼šæ˜¾è‘—å¢åŠ è®¡ç®—æ—¶é—´å—ï¼Ÿ**
   - æ˜¯çš„ï¼Œä¼šå¢åŠ  N+1 å€è®¡ç®—æ—¶é—´ï¼ˆNä¸ºéªŒè¯æ—¶é—´æ®µæ•°é‡ï¼‰
   - å»ºè®®å…ˆç”¨è¾ƒå°å‚æ•°èŒƒå›´æµ‹è¯•ï¼Œç¡®å®šå¤§è‡´åŒºé—´åå†å®Œæ•´éªŒè¯
   - å¯ä»¥å…ˆç”¨2ä¸ªéªŒè¯æ—¶é—´æ®µï¼Œå¹³è¡¡æ•ˆæœå’Œæ•ˆç‡
   - ä½¿ç”¨æ··åˆä¼˜åŒ–æ–¹æ³•ï¼Œå…ˆç²—æœç´¢åç²¾ç»†éªŒè¯

5. **â“ å¦‚ä½•è®¾ç½®äº¤å‰éªŒè¯çš„æƒé‡ï¼Ÿ**
   - **ä¿å®ˆå‹**ï¼šè®­ç»ƒ0.8ï¼ŒéªŒè¯0.2ï¼ˆé‡è§†è®­ç»ƒæœŸè¡¨ç°ï¼‰
   - **å¹³è¡¡å‹**ï¼šè®­ç»ƒ0.6ï¼ŒéªŒè¯0.4ï¼ˆæ¨èï¼Œå¹³è¡¡ä¸¤è€…ï¼‰
   - **æ¿€è¿›å‹**ï¼šè®­ç»ƒ0.5ï¼ŒéªŒè¯0.5ï¼ˆæ›´é‡è§†æ³›åŒ–èƒ½åŠ›ï¼‰
   - æ–°ç­–ç•¥å»ºè®®ä»å¹³è¡¡å‹å¼€å§‹

6. **â“ ä¼˜åŒ–å‡ºçš„å‚æ•°åœ¨å®é™…ä¸­è¡¨ç°ä¸ä½³**
   - æ£€æŸ¥äº¤å‰éªŒè¯çš„ç¨³å®šæ€§è¯„åˆ†ï¼Œå¯èƒ½å­˜åœ¨è¿‡æ‹Ÿåˆ
   - å¯èƒ½å­˜åœ¨æ•°æ®çª¥æ¢åå·®ï¼Œåº”å‡å°‘ä¼˜åŒ–é¢‘ç‡
   - å¸‚åœºç¯å¢ƒå¯èƒ½å·²å‘ç”Ÿå˜åŒ–ï¼Œéœ€è¦é‡æ–°è¯„ä¼°
   - è€ƒè™‘ä½¿ç”¨æ›´ä¿å®ˆçš„å‚æ•°èŒƒå›´é‡æ–°ä¼˜åŒ–

7. **â“ åº”è¯¥å¤šä¹…é‡æ–°ä¼˜åŒ–ä¸€æ¬¡ï¼Ÿ**
   - å»ºè®®æ¯3-6ä¸ªæœˆè¯„ä¼°ä¸€æ¬¡å‚æ•°æœ‰æ•ˆæ€§
   - å®šæœŸæ£€æŸ¥å½“å‰å‚æ•°çš„ç¨³å®šæ€§è¯„åˆ†å˜åŒ–
   - å¸‚åœºå‡ºç°é‡å¤§å˜åŒ–æ—¶å¯è€ƒè™‘é‡æ–°ä¼˜åŒ–
   - é¿å…å› çŸ­æœŸè¡¨ç°ä¸ä½³è€Œé¢‘ç¹è°ƒæ•´

## æ›´æ–°æ—¥å¿—

### v1.2.0 (Current)
- âœ… å®ç°åŸºç¡€å‚æ•°ä¼˜åŒ–åŠŸèƒ½ï¼ˆç½‘æ ¼æœç´¢ã€è´å¶æ–¯ä¼˜åŒ–ã€æ··åˆæ–¹æ³•ï¼‰
- âœ… æ”¯æŒå¤šç§ä¼˜åŒ–ç›®æ ‡ï¼ˆæ”¶ç›Šç‡ã€å¤æ™®æ¯”ç‡ã€æœ€å¤§å›æ’¤ç­‰ï¼‰
- âœ… æä¾›å®æ—¶è¿›åº¦ç›‘æ§å’Œç»“æœåˆ†æ
- âœ… å†…ç½®è¿‡æ‹Ÿåˆæ£€æµ‹å’Œé˜²æŠ¤æœºåˆ¶
- âœ… é›†æˆä½¿ç”¨æŒ‡å—å’Œæœ€ä½³å®è·µ
- âœ… **æ–°å¢äº¤å‰éªŒè¯åŠŸèƒ½** - æ™ºèƒ½å¤šæ—¶é—´æ®µéªŒè¯ï¼Œæœ‰æ•ˆé˜²æ­¢è¿‡æ‹Ÿåˆ
- âœ… **ç¨³å®šæ€§è¯„åˆ†ç³»ç»Ÿ** - é‡åŒ–è¯„ä¼°å‚æ•°åœ¨ä¸åŒæ—¶é—´æ®µçš„è¡¨ç°ä¸€è‡´æ€§
- âœ… **ç»¼åˆè¯„åˆ†æœºåˆ¶** - ç»“åˆè®­ç»ƒæœŸå’ŒéªŒè¯æœŸè¡¨ç°çš„åŠ æƒè¯„åˆ†

### v1.1.0
- âœ… å®ç°åŸºç¡€å‚æ•°ä¼˜åŒ–åŠŸèƒ½
- âœ… æ”¯æŒå¤šç§ä¼˜åŒ–ç›®æ ‡å’Œæ–¹æ³•
- âœ… åŸºç¡€è¿‡æ‹Ÿåˆé˜²æŠ¤æœºåˆ¶

### æœªæ¥è®¡åˆ’
- [ ] ğŸ”„ å®ç°è‡ªåŠ¨æ—¶é—´åˆ†å‰²éªŒè¯æ¡†æ¶
- [ ] ğŸ“Š æ·»åŠ å‚æ•°æ•æ„Ÿæ€§å¯è§†åŒ–åˆ†æ
- [ ] ğŸ¤– é›†æˆæ›´å¤šæœºå™¨å­¦ä¹ ä¼˜åŒ–ç®—æ³•ï¼ˆé—ä¼ ç®—æ³•ã€ç²’å­ç¾¤ä¼˜åŒ–ï¼‰
- [ ] ğŸ“ˆ æ”¯æŒå¤šç­–ç•¥ç»„åˆä¼˜åŒ–
- [ ] âš¡ å®ç°åˆ†å¸ƒå¼å¹¶è¡Œä¼˜åŒ–
- [ ] ğŸ” æ·»åŠ å®æ—¶è¿‡æ‹Ÿåˆç›‘æ§å’Œé¢„è­¦
- [ ] ğŸ“± ç§»åŠ¨ç«¯ä¼˜åŒ–ç•Œé¢æ”¯æŒ
- [ ] ğŸ§ª äº¤å‰éªŒè¯ç»“æœå¯è§†åŒ–åˆ†æ
- [ ] ğŸ“‹ ä¼˜åŒ–å†å²å’Œå‚æ•°è¿½è¸ªç³»ç»Ÿ

## è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤å˜æ›´
4. åˆ›å»º Pull Request

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- é¡¹ç›®Issues
- å¼€å‘å›¢é˜Ÿé‚®ç®±

---

## âš ï¸ é‡è¦å…è´£å£°æ˜

**å‚æ•°ä¼˜åŒ–åŸºäºå†å²æ•°æ®çš„å›æµ‹ç»“æœï¼Œä¸ä¿è¯æœªæ¥è¡¨ç°ã€‚**

- ğŸ“Š ä¼˜åŒ–ç»“æœä»…åæ˜ å†å²æ•°æ®ä¸Šçš„è¡¨ç°ï¼Œä¸æ„æˆæŠ•èµ„å»ºè®®
- ğŸ”„ å¸‚åœºç¯å¢ƒæŒç»­å˜åŒ–ï¼Œå†å²æœ€ä¼˜å‚æ•°å¯èƒ½ä¸é€‚ç”¨äºæœªæ¥
- âš–ï¸ è¯·ç»“åˆå®é™…å¸‚åœºæƒ…å†µã€é£é™©æ‰¿å—èƒ½åŠ›å’Œèµ„é‡‘ç®¡ç†åŸåˆ™ä½¿ç”¨
- ğŸ§ª å»ºè®®å…ˆç”¨å°èµ„é‡‘æµ‹è¯•ï¼ŒéªŒè¯å‚æ•°åœ¨å®é™…äº¤æ˜“ä¸­çš„æœ‰æ•ˆæ€§
- ğŸ” å®šæœŸç›‘æ§å’Œè¯„ä¼°å‚æ•°è¡¨ç°ï¼ŒåŠæ—¶è°ƒæ•´ç­–ç•¥

**è¿‡æ‹Ÿåˆæ˜¯é‡åŒ–äº¤æ˜“ä¸­çš„å¸¸è§é™·é˜±ï¼Œè¯·åŠ¡å¿…éµå¾ªæœ¬æ–‡æ¡£çš„æœ€ä½³å®è·µæŒ‡å—ï¼**

## ğŸ¯ å¯»æ‰¾é«˜äº¤å‰éªŒè¯åˆ†æ•°å‚æ•°çš„å®ç”¨ç­–ç•¥

å½“æ‚¨å‘ç°ç°æœ‰å‚æ•°çš„äº¤å‰éªŒè¯åˆ†æ•°ä¸é«˜æ—¶ï¼Œå¯ä»¥é‡‡ç”¨ä»¥ä¸‹ç³»ç»Ÿæ€§æ–¹æ³•æ¥æ”¹å–„ï¼š

### ğŸ“Š ç¬¬ä¸€æ­¥ï¼šè¯Šæ–­å½“å‰é—®é¢˜

#### 1.1 åˆ†æç¨³å®šæ€§è¯„åˆ†ä½çš„åŸå› 
```typescript
// æ£€æŸ¥å„æ—¶é—´æ®µçš„è¡¨ç°å·®å¼‚
const cv = bestResult.crossValidation;
const trainingScore = cv.trainingResult.objectiveValue;
const validationScores = cv.validationResults.map(vr => vr.objectiveValue);

console.log('è®­ç»ƒæœŸå¾—åˆ†:', trainingScore);
console.log('éªŒè¯æœŸå¾—åˆ†:', validationScores);
console.log('åˆ†æ•°å·®å¼‚:', Math.max(...validationScores) - Math.min(...validationScores));
console.log('æ ‡å‡†å·®:', cv.consistency.standardDeviation);

// åˆ¤æ–­é—®é¢˜ç±»å‹
if (trainingScore > Math.max(...validationScores) * 1.5) {
  console.log('é—®é¢˜ï¼šè®­ç»ƒæœŸè¿‡æ‹Ÿåˆä¸¥é‡');
} else if (cv.consistency.standardDeviation > trainingScore * 0.3) {
  console.log('é—®é¢˜ï¼šå„æ—¶é—´æ®µè¡¨ç°å·®å¼‚è¿‡å¤§');
} else {
  console.log('é—®é¢˜ï¼šæ•´ä½“è¡¨ç°è¾ƒå·®ï¼Œéœ€è¦å¯»æ‰¾æ›´å¥½çš„å‚æ•°ç©ºé—´');
}
```

#### 1.2 æ£€æŸ¥å‚æ•°åˆ†å¸ƒ
```typescript
// åˆ†æå½“å‰æœ€ä¼˜å‚æ•°æ˜¯å¦åˆç†
const currentParams = bestResult.combination;
console.log('å½“å‰å‚æ•°:', {
  è·Œå¹…æƒé‡: currentParams.priceChangeWeight,
  æˆäº¤é‡æƒé‡: currentParams.volumeWeight,
  æ³¢åŠ¨ç‡æƒé‡: currentParams.volatilityWeight,
  èµ„é‡‘è´¹ç‡æƒé‡: currentParams.fundingRateWeight,
  åšç©ºæ•°é‡: currentParams.maxShortPositions
});

// æ£€æŸ¥æ˜¯å¦æœ‰æç«¯å€¼
const weights = [currentParams.priceChangeWeight, currentParams.volumeWeight, 
                currentParams.volatilityWeight, currentParams.fundingRateWeight];
const hasExtreme = weights.some(w => w < 0.05 || w > 0.8);
if (hasExtreme) {
  console.log('è­¦å‘Šï¼šå‚æ•°åŒ…å«æç«¯å€¼ï¼Œå¯èƒ½ä¸å¤Ÿç¨³å®š');
}
```

### ğŸ”§ ç¬¬äºŒæ­¥ï¼šè°ƒæ•´æœç´¢ç­–ç•¥

#### 2.1 æ‰©å¤§æœç´¢ç©ºé—´ï¼ˆæ¸è¿›å¼ï¼‰
```typescript
// é˜¶æ®µ1ï¼šé€‚åº¦æ‰©å¤§èŒƒå›´
const expandedRange = {
  weights: {
    // åœ¨å½“å‰æœ€ä¼˜å‚æ•°åŸºç¡€ä¸Šé€‚åº¦æ‰©å±•
    priceChangeWeight: { min: 0.15, max: 0.65, step: 0.05 },
    volumeWeight: { min: 0.05, max: 0.35, step: 0.05 },
    volatilityWeight: { min: 0.05, max: 0.25, step: 0.05 },
    fundingRateWeight: { min: 0.25, max: 0.75, step: 0.05 }
  },
  maxShortPositions: { min: 3, max: 20, step: 1 }
};

// é˜¶æ®µ2ï¼šå¦‚æœä»ç„¶ä¸ç†æƒ³ï¼Œè¿›ä¸€æ­¥æ‰©å¤§
const widerRange = {
  weights: {
    priceChangeWeight: { min: 0.1, max: 0.7, step: 0.05 },
    volumeWeight: { min: 0.05, max: 0.4, step: 0.05 },
    volatilityWeight: { min: 0.05, max: 0.3, step: 0.05 },
    fundingRateWeight: { min: 0.2, max: 0.8, step: 0.05 }
  },
  maxShortPositions: { min: 1, max: 25, step: 1 }
};
```

#### 2.2 å°è¯•ä¸åŒçš„ä»“ä½åˆ†é…ç­–ç•¥
```typescript
// æµ‹è¯•æ‰€æœ‰ä¸‰ç§ç­–ç•¥çš„ç¨³å®šæ€§
const allocationStrategies = [
  PositionAllocationStrategy.EQUAL_ALLOCATION,
  PositionAllocationStrategy.BY_VOLUME,
  PositionAllocationStrategy.BY_COMPOSITE_SCORE
];

// åˆ†åˆ«é’ˆå¯¹æ¯ç§ç­–ç•¥è¿›è¡Œä¼˜åŒ–
for (const strategy of allocationStrategies) {
  const config = {
    ...baseConfig,
    allocationStrategyMode: 'fixed',
    fixedAllocationStrategy: strategy
  };
  
  console.log(`æµ‹è¯•ç­–ç•¥: ${strategy}`);
  const results = await optimizer.startOptimization(config, parameterRange);
  // æ¯”è¾ƒç¨³å®šæ€§è¯„åˆ†
}
```

### ğŸ“ˆ ç¬¬ä¸‰æ­¥ï¼šä¼˜åŒ–äº¤å‰éªŒè¯é…ç½®

#### 3.1 è°ƒæ•´éªŒè¯æ—¶é—´æ®µé…ç½®
```typescript
// ç­–ç•¥Aï¼šå¢åŠ éªŒè¯æ—¶é—´æ®µæ•°é‡ï¼Œè·å¾—æ›´å…¨é¢çš„è¯„ä¼°
const morePeriodsConfig = {
  enabled: true,
  validationPeriods: 3, // å¢åŠ åˆ°3ä¸ª
  periodLength: {
    type: 'fixed',
    fixedDays: 60  // ä½¿ç”¨å›ºå®šé•¿åº¦ï¼Œå‡å°‘éšæœºæ€§
  },
  selectionRange: {
    startDate: '2020-01-01', // æ‰©å¤§é€‰æ‹©èŒƒå›´
    endDate: '2024-12-31',
    allowOverlap: false
  },
  scoreWeights: {
    training: 0.5,    // æ›´é‡è§†éªŒè¯æœŸè¡¨ç°
    validation: 0.5
  }
};

// ç­–ç•¥Bï¼šä½¿ç”¨æ›´é•¿çš„éªŒè¯æ—¶é—´æ®µ
const longerPeriodsConfig = {
  enabled: true,
  validationPeriods: 2,
  periodLength: {
    type: 'random',
    randomRange: {
      minDays: 90,  // å¢åŠ æœ€å°é•¿åº¦
      maxDays: 180  // ä½¿ç”¨æ›´é•¿çš„éªŒè¯æœŸ
    }
  },
  // ... å…¶ä»–é…ç½®
};
```

#### 3.2 å°è¯•ä¸åŒçš„æƒé‡ç»„åˆ
```typescript
// æµ‹è¯•ä¸åŒçš„è®­ç»ƒ/éªŒè¯æƒé‡æ¯”ä¾‹
const weightConfigs = [
  { training: 0.7, validation: 0.3 }, // ä¿å®ˆå‹
  { training: 0.6, validation: 0.4 }, // å¹³è¡¡å‹
  { training: 0.5, validation: 0.5 }, // æ¿€è¿›å‹
  { training: 0.4, validation: 0.6 }  // éªŒè¯ä¼˜å…ˆå‹
];

for (const weights of weightConfigs) {
  const cvConfig = {
    ...crossValidationConfig,
    scoreWeights: weights
  };
  
  console.log(`æµ‹è¯•æƒé‡é…ç½®: è®­ç»ƒ${weights.training}, éªŒè¯${weights.validation}`);
  // è¿è¡Œä¼˜åŒ–å¹¶æ¯”è¾ƒç»“æœ
}
```

### ğŸ›ï¸ ç¬¬å››æ­¥ï¼šå¤šé˜¶æ®µä¼˜åŒ–ç­–ç•¥

#### 4.1 åˆ†å±‚ä¼˜åŒ–æ–¹æ³•
```typescript
// ç¬¬ä¸€é˜¶æ®µï¼šç²—ç²’åº¦å¿«é€Ÿç­›é€‰
const phase1Config = {
  method: 'grid',
  maxIterations: 100,
  objective: 'sharpe', // ä½¿ç”¨å¹³è¡¡çš„ç›®æ ‡
  crossValidation: {
    enabled: true,
    validationPeriods: 2,
    periodLength: { type: 'fixed', fixedDays: 60 },
    // ... å…¶ä»–é…ç½®
  }
};

const phase1Range = {
  weights: {
    priceChangeWeight: { min: 0.2, max: 0.6, step: 0.1 },
    volumeWeight: { min: 0.1, max: 0.3, step: 0.1 },
    volatilityWeight: { min: 0.05, max: 0.2, step: 0.05 },
    fundingRateWeight: { min: 0.3, max: 0.7, step: 0.1 }
  },
  maxShortPositions: { min: 5, max: 15, step: 5 }
};

console.log('ç¬¬ä¸€é˜¶æ®µï¼šç²—ç²’åº¦ç­›é€‰');
const phase1Results = await optimizer.startOptimization(phase1Config, phase1Range);

// ç¬¬äºŒé˜¶æ®µï¼šåœ¨æœ€ä½³åŒºåŸŸç²¾ç»†æœç´¢
const topStableResults = phase1Results
  .filter(r => r.crossValidation?.consistency.stabilityScore > 0.6)
  .slice(0, 3);

if (topStableResults.length > 0) {
  const bestParams = topStableResults[0].combination;
  
  // åœ¨æœ€ä½³å‚æ•°é™„è¿‘ç²¾ç»†æœç´¢
  const phase2Range = {
    weights: {
      priceChangeWeight: { 
        min: Math.max(0.1, bestParams.priceChangeWeight - 0.1), 
        max: Math.min(0.7, bestParams.priceChangeWeight + 0.1), 
        step: 0.02 
      },
      // ... ç±»ä¼¼åœ°è°ƒæ•´å…¶ä»–æƒé‡
    },
    maxShortPositions: { 
      min: Math.max(1, bestParams.maxShortPositions - 3), 
      max: Math.min(25, bestParams.maxShortPositions + 3), 
      step: 1 
    }
  };
  
  console.log('ç¬¬äºŒé˜¶æ®µï¼šç²¾ç»†æœç´¢');
  const phase2Results = await optimizer.startOptimization(phase1Config, phase2Range);
}
```

#### 4.2 å¤šç›®æ ‡ç»¼åˆè¯„ä¼°
```typescript
// å°è¯•ä¸åŒçš„ä¼˜åŒ–ç›®æ ‡ï¼Œå¯»æ‰¾æ›´ç¨³å®šçš„å‚æ•°
const objectives = ['sharpe', 'maxDrawdown', 'calmar', 'composite'];
const objectiveResults = [];

for (const objective of objectives) {
  console.log(`æµ‹è¯•ä¼˜åŒ–ç›®æ ‡: ${objective}`);
  const config = { ...baseConfig, objective };
  const results = await optimizer.startOptimization(config, parameterRange);
  
  const stableResults = results.filter(r => 
    r.crossValidation?.consistency.stabilityScore > 0.6
  );
  
  objectiveResults.push({
    objective,
    bestStableResult: stableResults[0],
    stableCount: stableResults.length
  });
}

// é€‰æ‹©äº§ç”Ÿæœ€å¤šç¨³å®šç»“æœçš„ç›®æ ‡
const bestObjective = objectiveResults
  .sort((a, b) => b.stableCount - a.stableCount)[0];
console.log(`æœ€é€‚åˆçš„ä¼˜åŒ–ç›®æ ‡: ${bestObjective.objective}`);
```

### ğŸ” ç¬¬äº”æ­¥ï¼šé«˜çº§æœç´¢æŠ€å·§

#### 5.1 èšç±»åˆ†æå¯»æ‰¾ç¨³å®šåŒºåŸŸ
```typescript
// åˆ†æå¤šæ¬¡ä¼˜åŒ–ç»“æœï¼Œå¯»æ‰¾ç¨³å®šçš„å‚æ•°åŒºåŸŸ
const allStableResults = []; // æ”¶é›†å¤šæ¬¡ä¼˜åŒ–çš„ç¨³å®šç»“æœ

// è¿›è¡Œå¤šæ¬¡ä¼˜åŒ–ï¼ˆæ”¹å˜éšæœºç§å­ï¼‰
for (let run = 0; run < 5; run++) {
  console.log(`ç¬¬${run + 1}æ¬¡ä¼˜åŒ–è¿è¡Œ`);
  const results = await optimizer.startOptimization(config, parameterRange);
  const stable = results.filter(r => 
    r.crossValidation?.consistency.stabilityScore > 0.7
  );
  allStableResults.push(...stable);
}

// åˆ†æç¨³å®šå‚æ•°çš„åˆ†å¸ƒ
const stableWeights = {
  priceChange: allStableResults.map(r => r.combination.priceChangeWeight),
  volume: allStableResults.map(r => r.combination.volumeWeight),
  volatility: allStableResults.map(r => r.combination.volatilityWeight),
  fundingRate: allStableResults.map(r => r.combination.fundingRateWeight)
};

// è®¡ç®—ç¨³å®šåŒºåŸŸçš„ä¸­å¿ƒå’ŒèŒƒå›´
Object.entries(stableWeights).forEach(([name, values]) => {
  const mean = values.reduce((a, b) => a + b, 0) / values.length;
  const std = Math.sqrt(values.reduce((a, b) => a + (b - mean) ** 2, 0) / values.length);
  console.log(`${name}: å‡å€¼=${mean.toFixed(3)}, æ ‡å‡†å·®=${std.toFixed(3)}`);
  console.log(`å»ºè®®èŒƒå›´: ${Math.max(0.05, mean - std).toFixed(3)} - ${Math.min(0.8, mean + std).toFixed(3)}`);
});
```

#### 5.2 å‚æ•°æ•æ„Ÿæ€§æµ‹è¯•
```typescript
// æµ‹è¯•æ¯ä¸ªå‚æ•°å¯¹ç¨³å®šæ€§çš„å½±å“
const baseParams = bestStableResult.combination;
const sensitivityResults = [];

const testParameters = [
  'priceChangeWeight', 'volumeWeight', 
  'volatilityWeight', 'fundingRateWeight', 'maxShortPositions'
];

for (const param of testParameters) {
  console.log(`æµ‹è¯•å‚æ•°æ•æ„Ÿæ€§: ${param}`);
  
  // æµ‹è¯•å‚æ•°åœ¨Â±20%èŒƒå›´å†…çš„å˜åŒ–
  const variations = [-0.2, -0.1, 0, 0.1, 0.2];
  const paramResults = [];
  
  for (const variation of variations) {
    const testParams = { ...baseParams };
    
    if (param === 'maxShortPositions') {
      testParams[param] = Math.max(1, Math.round(baseParams[param] * (1 + variation)));
    } else {
      testParams[param] = baseParams[param] * (1 + variation);
      // é‡æ–°å½’ä¸€åŒ–æƒé‡
      if (param !== 'maxShortPositions') {
        const weightSum = testParams.priceChangeWeight + testParams.volumeWeight + 
                         testParams.volatilityWeight + testParams.fundingRateWeight;
        testParams.priceChangeWeight /= weightSum;
        testParams.volumeWeight /= weightSum;
        testParams.volatilityWeight /= weightSum;
        testParams.fundingRateWeight /= weightSum;
      }
    }
    
    // è¯„ä¼°è¿™ä¸ªå‚æ•°ç»„åˆ
    const result = await evaluateSingleCombination(testParams, config);
    paramResults.push({
      variation,
      stabilityScore: result.crossValidation?.consistency.stabilityScore || 0
    });
  }
  
  sensitivityResults.push({
    parameter: param,
    results: paramResults,
    sensitivity: Math.max(...paramResults.map(r => r.stabilityScore)) - 
                Math.min(...paramResults.map(r => r.stabilityScore))
  });
}

// è¯†åˆ«æœ€æ•æ„Ÿçš„å‚æ•°
sensitivityResults.sort((a, b) => b.sensitivity - a.sensitivity);
console.log('å‚æ•°æ•æ„Ÿæ€§æ’åºï¼ˆä»é«˜åˆ°ä½ï¼‰:');
sensitivityResults.forEach(sr => {
  console.log(`${sr.parameter}: æ•æ„Ÿæ€§=${sr.sensitivity.toFixed(3)}`);
});
```

### ğŸ“‹ ç¬¬å…­æ­¥ï¼šç³»ç»Ÿæ€§éªŒè¯æµç¨‹

#### 6.1 å¤šå¸‚åœºç¯å¢ƒæµ‹è¯•
```typescript
// å®šä¹‰ä¸åŒçš„å¸‚åœºç¯å¢ƒæ—¶é—´æ®µ
const marketEnvironments = [
  { name: 'ç‰›å¸‚', startDate: '2020-10-01', endDate: '2021-04-01' },
  { name: 'ç†Šå¸‚', startDate: '2022-01-01', endDate: '2022-06-01' },
  { name: 'æ¨ªç›˜', startDate: '2023-01-01', endDate: '2023-06-01' },
  { name: 'é«˜æ³¢åŠ¨', startDate: '2021-04-01', endDate: '2021-07-01' }
];

// æµ‹è¯•å€™é€‰å‚æ•°åœ¨ä¸åŒå¸‚åœºç¯å¢ƒä¸‹çš„è¡¨ç°
const candidateParams = topStableResults.slice(0, 5);

for (const params of candidateParams) {
  console.log(`æµ‹è¯•å‚æ•°ç»„åˆ: ${params.combination.id}`);
  const environmentResults = [];
  
  for (const env of marketEnvironments) {
    const envConfig = {
      ...config,
      baseParams: {
        ...config.baseParams,
        startDate: env.startDate,
        endDate: env.endDate
      }
    };
    
    const result = await evaluateSingleCombination(params.combination, envConfig);
    environmentResults.push({
      environment: env.name,
      performance: result.objectiveValue
    });
  }
  
  // è®¡ç®—è·¨ç¯å¢ƒç¨³å®šæ€§
  const performances = environmentResults.map(er => er.performance);
  const envStability = 1 - (Math.max(...performances) - Math.min(...performances)) / Math.abs(performances.reduce((a, b) => a + b, 0) / performances.length);
  
  console.log(`è·¨ç¯å¢ƒç¨³å®šæ€§: ${envStability.toFixed(3)}`);
  environmentResults.forEach(er => 
    console.log(`  ${er.environment}: ${er.performance.toFixed(4)}`)
  );
}
```

### ğŸ’¡ å®ç”¨å»ºè®®æ€»ç»“

1. **ğŸ¯ ä¼˜å…ˆçº§ç­–ç•¥**
   - é¦–é€‰ç¨³å®šæ€§è¯„åˆ† > 0.7 çš„å‚æ•°ï¼Œå³ä½¿æ”¶ç›Šç‡ä¸æ˜¯æœ€é«˜
   - å…³æ³¨è·¨æ—¶é—´æ®µè¡¨ç°ä¸€è‡´æ€§ï¼Œè€Œéå•ä¸€æ—¶é—´æ®µçš„æå€¼
   - é€‰æ‹©å¯¹å‚æ•°å¾®è°ƒä¸æ•æ„Ÿçš„ç¨³å¥ç»„åˆ

2. **ğŸ”„ è¿­ä»£æ”¹è¿›æ–¹æ³•**
   - ä»ä¿å®ˆå‚æ•°èŒƒå›´å¼€å§‹ï¼Œé€æ­¥æ‰©å¤§æœç´¢ç©ºé—´
   - å¤šæ¬¡è¿è¡Œä¼˜åŒ–ï¼Œå¯»æ‰¾é‡å¤å‡ºç°çš„ç¨³å®šåŒºåŸŸ
   - ç»“åˆå¤šç§ä¼˜åŒ–ç›®æ ‡çš„ç»“æœï¼Œå¯»æ‰¾å…±è¯†å‚æ•°

3. **âš ï¸ é¿å…å¸¸è§é™·é˜±**
   - ä¸è¦å› ä¸ºå•æ¬¡äº¤å‰éªŒè¯åˆ†æ•°ä½å°±ç«‹å³æ‰©å¤§å…¨éƒ¨å‚æ•°èŒƒå›´
   - ä¸è¦å¿½è§†ä»“ä½åˆ†é…ç­–ç•¥å¯¹ç¨³å®šæ€§çš„å½±å“
   - ä¸è¦åœ¨æ²¡æœ‰è¯Šæ–­é—®é¢˜åŸå› çš„æƒ…å†µä¸‹ç›²ç›®å¢åŠ éªŒè¯æ—¶é—´æ®µ

4. **ğŸ“Š æ•°æ®é©±åŠ¨å†³ç­–**
   - è®°å½•æ¯æ¬¡ä¼˜åŒ–çš„é…ç½®å’Œç¨³å®šæ€§è¯„åˆ†
   - å»ºç«‹å‚æ•°-ç¨³å®šæ€§çš„æ˜ å°„å…³ç³»
   - ä½¿ç”¨ç»Ÿè®¡åˆ†ææ‰¾å‡ºæœ€å¯é çš„å‚æ•°åŒºåŸŸ

é€šè¿‡è¿™å¥—ç³»ç»Ÿæ€§æ–¹æ³•ï¼Œæ‚¨åº”è¯¥èƒ½å¤Ÿæ˜¾è‘—æé«˜äº¤å‰éªŒè¯åˆ†æ•°ï¼Œæ‰¾åˆ°æ›´åŠ ç¨³å¥å’Œå¯ä¿¡çš„å‚æ•°ç»„åˆã€‚